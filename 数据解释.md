# 数据库名称：trip / tmpsql

## 数据库表：

#### order-订单表

orderid(订单id)

ata(真实行程总时间)

distance(路线距离)

simpleeta(出发时刻平均通行时间加和)

driverid(司机id)

sliceid(出发时刻时间片id)

date

理解：

1. date和sliceid可以计算出order的出发时间
2. 

#### intersection-十字路口表-过红绿灯时的时间

crossid

crosstime

entranceid

exitid

orderid

#### trajectory-订单路线表

linkid

linktime

linkratio

linkcurrentstatus

linkarrivalstatus

orderid

#### nextlinks-路段连接表

(  ,nextlink1,nextlink2,nextlink3,nextlink4,nextlink5)

## 难点：

每个小路段并非肯定是一段长路，有可能一段路会被分成若干个小路段

预测功能：我想输入起点和终点，在数据库中找出该起点和终点的路线，并且计算平均值。

但是order表中并未保存每个起点和终点，intersection表中有orderid的每个小段，我如何把它连接起来，因为每个

## 数据实例

### order-订单表

((订单id),(真实行程总时间),(路线距离),出发时刻平均通行时间加和,司机id,出发时刻时间片id)

5966280 531 2923.0000 495 75457 153

### trajectory-订单路线表

(linkid,linktime,linkratio,linkcurrentstatus,linkarrivalstatus)

157298:4.5000,1.0000,1,0

511622:2.8552,1.0000,1,1

524542:2.2345,1.0000,1,0

97293:3.6000,1.0000,1,1

273845:3.2276,1.0000,1,1

556273:3.7241,1.0000,1,1

73842:2.4828,1.0000,1,1

101675:2.4828,1.0000,1,1

325444:0.7043,1.0000,1,1

134737:3.6000,1.0000,1,1

611534:15.9750,1.0000,1,1

* 47128:18.0000,1.0000,1,1 --路口1
* 29620:1.9800,1.0000,1,1
* 204460:15.3818,1.0000,1,1

436510:6.5872,1.0000,1,1

332956:4.1727,1.0000,1,1

324365:2.8800,1.0000,1,1

83567:5.6195,1.0000,1,1

61707:7.0500,1.0000,1,1

* 624101:10.2462,1.0000,1,1 --路口2
* 470155:2.1103,1.0000,1,1
* 153565:3.4875,1.0000,1,1

141013:6.0300,1.0000,1,1

218370:3.6000,1.0000,1,0

430354:4.5000,1.0000,1,1

47019:0.8082,1.0000,1,0

491417:2.4750,1.0000,1,0

195253:7.8545,1.0000,1,1

438985:15.5415,1.0000,1,1

590789:6.0585,1.0000,1,1

585900:1.2000,1.0000,1,0

593444:3.2571,1.0000,1,1

168277:6.4800,1.0000,1,1

192950:2.9793,1.0000,1,0

540065:2.5714,1.0000,1,1

326014:4.4471,1.0000,1,1

154766:4.0800,1.0000,1,1

337407:1.3263,1.0000,1,1

320165:1.0667,1.0000,0,0

238003:21.6000,1.0000,1,1

314863:2.4923,1.0000,1,0

* 30464:10.3200,1.0000,1,1 --路口3
* 439101:1.3091,1.0000,1,0
* 397883:4.8000,1.0000,1,1

340640:7.0560,1.0000,1,1

263261:5.5385,1.0000,1,1

483343:6.6000,1.0000,1,1

520096:9.6000,1.0000,1,1

299212:8.7750,1.0000,1,1

271678:1.2000,1.0000,1,0

427595:16.4571,1.0000,1,1

440486:6.9600,1.0000,1,1

* 160457:8.6824,1.0000,1,1 --路口4
* 45227:2.0348,1.0000,1,0
* 527119:4.4400,1.0000,1,1

541865:3.5077,1.0000,1,1

449849:2.5463,1.0000,1,0

215958:4.4526,1.0000,1,1

22603:11.7000,1.0000,1,1

* 597673:16.0000,1.0000,1,1 --路口5
* 191034:2.2737,1.0000,1,1
* 507113:1.0286,1.0000,1,0

554586:0.8571,1.0000,1,0

631985:1.3714,1.0000,1,1

487340:9.2842,1.0000,1,0

### intersection-十字路口表

(crossid,crosstime,entranceid,exitid,orderid)

47128_204460:23

624101_153565:30

30464_397883:26

160457_527119:18

597673_507113:30
